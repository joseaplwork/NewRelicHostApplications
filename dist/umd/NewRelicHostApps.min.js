!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.NewRelicHostAppsBundle=e()}(this,function(){"use strict";function t(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n+=1)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();return function(){function r(t){e(this,r),this.MOST_SATISFING=25;var n=this.constructor.getHashedApps(t);this.apps=this.constructor.sortAppsByApdex(n)}return n(r,[{key:"_getMostSatisfyingApps",value:function(t){var e=t.length>=this.MOST_SATISFING?this.MOST_SATISFING:t.length;return t.slice(0,e)}},{key:"_filterByOccurrence",value:function(t,e){return this.apps.filter(function(n){return n[t].includes(e)})}},{key:"getTopAppsByHost",value:function(t){var e=this._filterByOccurrence("host",t);return this._getMostSatisfyingApps(e)}},{key:"_sortedPush",value:function(t){var e=this.apps;if(e[0].apdex<=t.apdex)return this.apps.unshift(this.constructor.getHashedApp(t)),this.apps;if(e[e.length-1].apdex>=t.apdex)return this.apps.push(this.constructor.getHashedApp(t)),this.apps;for(var n=0;n<e.length;n+=1)if(e[n].apdex<=t.apdex){this.apps.splice(n,0,this.constructor.getHashedApp(t));break}return this.apps}},{key:"addAppToHosts",value:function(t){var e=this._sortedPush(t);return this._getMostSatisfyingApps(e)}},{key:"_removeFromApps",value:function(t){var e=this.apps,n=e.length-1;if(e[0].$$id===t||e[n].$$id===t){var r=e[0].$$id===t?0:n;return this.apps.splice(r,1),this.apps}for(var s=0;s<e.length;s+=1)if(e[s].$$id===t){this.apps.splice(s,1);break}return this.apps}},{key:"removeAppFromHosts",value:function(t){var e=this._removeFromApps(t);return this._getMostSatisfyingApps(e)}}],[{key:"getHashedApps",value:function(e){if(!e)return null;for(var n=e,r=0;r<e.length;r+=1)n[r].$$id=t(JSON.stringify(n[r]));return n}},{key:"getHashedApp",value:function(e){return Object.assign({},{$$id:t(JSON.stringify(e))},e)}},{key:"sortAppsByApdex",value:function(t){return t&&t.length?t.sort(function(t,e){return t.apdex===e.apdex?0:t.apdex<e.apdex?1:-1}):[]}}]),r}()});
